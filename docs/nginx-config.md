[toc]

> 记录基本的 nginx 配置项

#### location

- 从所有的 prefix 字符串中检测匹配，最长的标识为推荐
- 从上到下检测正则，有一个匹配就终止检测并返回该匹配
- 没有任何正则匹配则返回第一步标识的推荐匹配（若该匹配前有 `^~` 则不进行正则匹配查询，直接返回）

多个 prefix 路径匹配时会匹配最长的路径，比如说现在有两条规则

```conf
location /{
  root html;
  index index.html;
}

location /html{
  root html;
  rewrite /html/(.*) /$1 break;
  index index.html;
}
```

那 /html/ 最后匹配上的就是第二条规则，因为第二条规则的 prefix （/html）更长

| 标识符 | 说明                                                                 |
| ------ | -------------------------------------------------------------------- |
| ~      | 使用正则匹配且区分大小写                                             |
| ~\*    | 使用正则匹配且不区分大小写                                           |
| =      | 精确匹配（用于提高匹配性能）                                         |
| ^~     | 写在字符串匹配前用于匹配（默认情况下正则匹配的优先级大于字符串匹配） |
